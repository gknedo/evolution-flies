{"version":3,"sources":["components/Background/Background.js","components/Butterfly/Butterfly.js","components/Background/BackgroundUtils.js","components/Background/images/forest.jpg","components/Background/images/tree.jpg","components/Background/images/snow-mountain.jpg","components/Menu/Menu.js","App.js","hooks/useKeyPress.js","reportWebVitals.js","index.js"],"names":["Background","image","children","className","style","backgroundImage","Butterfly","rotate","color","position","onClick","highContrast","xmlns","viewBox","width","height","left","top","fill","join","transform","d","availableBackgrounds","name","Menu","setMenuState","options","setOptions","onChange","event","background","target","value","map","index","selected","type","checked","window","innerWidth","innerHeight","randomInt","max","min","Math","floor","random","randomFromInt","variation","base","now","Date","getTime","App","useState","n","flies","i","push","id","nextId","generateFlies","setFlies","menuState","population","repopulate_every","last_repulate","keyPressed","targetKey","setKeyPressed","downHandler","key","upHandler","useEffect","addEventListener","removeEventListener","useKeyPress","removeFly","filteredFlies","_","filter","fly","sinceLastRepopulate","newFliesCount","round","sqrt","length","newFlies","sample","fcolor","mutateFlies","console","log","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6b04524b.chunk.js","sourcesContent":["import './Background.css';\n\nfunction Background({image, children}) {\n  return (\n      <div\n        className='background'\n        style={{backgroundImage: `url(${image})`}}\n      >\n        {children}\n      </div>\n  );\n}\n\nexport default Background;\n","import './Butterfly.css';\n\nfunction Butterfly({rotate=0, color=[0,0,0], position=[0,0], onClick, highContrast=false}) {\n  return (\n    <svg\n      className={`butterfly ${highContrast && 'high-contrast'}`}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 100 100\"\n      width=\"15px\" height=\"15px\"\n      style={{\n        left: position[0],\n        top: position[1],\n      }}\n      onClick={onClick}\n    >\n      <g\n        fill={`rgb(${color.join()})`}\n        transform={`rotate(${rotate} 50 50)`}\n      >\n        <path\n          d=\"M89.163,20.139c-14.103,0-33.235,17.606-35.841,28.565c-0.569-1.253-1.355-2.144-2.061-2.629  c1.26-4.288,7.351-9.814,8.349-14.258c0.109-0.484-0.89-0.941-1.015-0.442c-1.316,5.271-6.477,9.938-7.586,14.542  c-0.278-0.157-0.536-0.247-0.755-0.264v-0.003c-0.013,0-0.025,0.001-0.038,0.001c-0.013,0-0.025-0.001-0.038-0.001v0.003  c-0.219,0.017-0.477,0.106-0.755,0.264c-1.11-4.604-6.269-9.271-7.586-14.542c-0.125-0.5-1.123-0.042-1.014,0.442  c0.997,4.444,7.089,9.971,8.348,14.258c-0.705,0.486-1.491,1.376-2.06,2.629C44.506,37.745,25.373,20.139,11.27,20.139  c-4.671,0-6.737,0.809-6.737,3.324c0,7.276,11.537,29.025,15.708,31.349c1.727,0.962,3.896,1.207,5.917,0.817  c-2.485,2.049-4.289,5.194-4.289,9.513c0,10.374,7.205,15.721,14.283,15.721c7.649,0,11.229-6.597,11.229-22.906  c0.808,1.976,1.707,4.041,1.707,7.636c0,6.221-1.319,14.114,1.092,14.278v0.004c0.013,0,0.025-0.002,0.038-0.003  c0.013,0.001,0.025,0.003,0.038,0.003V79.87c2.411-0.164,1.092-8.058,1.092-14.278c0-3.595,0.897-5.66,1.706-7.636  c0,16.31,3.58,22.906,11.229,22.906c7.078,0,14.283-5.347,14.283-15.721c0-4.318-1.804-7.464-4.288-9.513  c2.02,0.39,4.188,0.145,5.915-0.817C84.363,52.487,95.9,30.738,95.9,23.462C95.9,20.947,93.834,20.139,89.163,20.139z\"\n        />\n      </g>\n    </svg>\n  );\n}\n\nexport default Butterfly;\n","import forest from './images/forest.jpg'\nimport tree from './images/tree.jpg'\nimport snowMountain from './images/snow-mountain.jpg'\n\nexport const availableBackgrounds = [\n  { name: 'Floresta', image: forest },\n  { name: 'Árvore', image: tree },\n  { name: 'Montanha Nevada', image: snowMountain },\n]\n","export default __webpack_public_path__ + \"static/media/forest.ce4a2a7f.jpg\";","export default __webpack_public_path__ + \"static/media/tree.1b4231e3.jpg\";","export default __webpack_public_path__ + \"static/media/snow-mountain.a5f303a1.jpg\";","import './Menu.css';\nimport { availableBackgrounds } from '../Background/BackgroundUtils'\n\nfunction Menu({setMenuState, options, setOptions}) {\n  const changeContrast = () => (\n    setOptions({...options, highContrast: !options.highContrast})\n  );\n\n  return (\n    <div className=\"menu\">\n      <div className=\"item\">\n      <select\n        onChange={(event) => setOptions({...options, background: availableBackgrounds[event.target.value]})}\n      >\n        {availableBackgrounds.map((background, index) => (\n          <option\n            key={background.name}\n            selected={options.background.name === background.name}\n            value={index}\n          >\n            {background.name}\n          </option>\n        ))}\n      </select>\n      </div>\n      <div className=\"item\">\n        <label>\n          <input type=\"checkbox\" checked={options.highContrast} onChange={changeContrast} />\n          Alto contraste\n        </label>\n      </div>\n      <button onClick={() => setMenuState(false)}>Salvar</button>\n    </div>\n  );\n}\n\nexport default Menu;\n","import React, { useState, useEffect } from 'react';\nimport Background from './components/Background/Background';\nimport Butterfly from './components/Butterfly/Butterfly';\nimport Menu from './components/Menu/Menu';\nimport nextId from 'react-id-generator';\nimport useKeyPress from './hooks/useKeyPress';\nimport _ from 'lodash';\nimport { availableBackgrounds } from './components/Background/BackgroundUtils'\n\nconst map = {\n  width: window.innerWidth,\n  height: window.innerHeight,\n  border: 20,\n};\n\nfunction randomInt(max=360, min=0){\n  return Math.floor(Math.random() * (max-min)) + min\n}\n\nfunction randomFromInt(variation, base=0){\n  return randomInt(base+variation, base-variation);\n}\n\nfunction generateFlies(n){\n  const flies = []\n  for(let i = 0; i < n; i++){\n    flies.push({\n      id: nextId(),\n      rotate: randomInt(360),\n      color: [\n        randomInt(256),\n        randomInt(256),\n        randomInt(256),\n      ],\n      position: [\n        randomInt(map.width - 2 * map.border) + map.border,\n        randomInt(map.height -2 * map.border) + map.border,\n      ]\n    })\n  }\n  return flies;\n}\n\nfunction mutate(fly){\n  return {\n    id: nextId(),\n    rotate: randomFromInt(10, fly.rotate),\n    color: fly.color.map((fcolor) => (\n      Math.max(0, Math.min(255, randomFromInt(30, fcolor)))\n    )),\n    position: [\n      ((randomFromInt(125, fly.position[0]) + map.width) % (map.width - 2 * map.border)) + map.border,\n      ((randomFromInt(125, fly.position[1]) + map.height) % (map.height - 2 * map.border)) + map.border,\n    ]\n  }\n}\n\nconst mutateFlies = (flies, n) => {\n  const newFlies = [];\n  while(newFlies.length < n)\n    newFlies.push(mutate(_.sample(flies)));\n  return [...flies, ...newFlies];\n};\n\nfunction now(){\n  return Math.floor(new Date().getTime()/1000);\n}\n\nfunction App() {\n  const [flies, setFlies] = useState(generateFlies(25));\n  const [menuState, setMenuState] = useState(false);\n  const [options, setOptions] = useState({\n    background: availableBackgrounds[0],\n    population: {\n      max: 40,\n      min: 1,\n      repopulate_every: 1,\n      last_repulate: now(),\n    }\n  });\n\n  const keyPressed = useKeyPress('Escape');\n  useEffect(() => {\n    if(keyPressed) setMenuState(!menuState);\n  }, [keyPressed]);\n\n  const removeFly = (id) => {\n    let filteredFlies = _.filter(flies, (fly) => fly.id !== id)\n\n    const sinceLastRepopulate = now() - options.population.last_repulate;\n    \n    if(sinceLastRepopulate){\n      const newFliesCount = Math.round(Math.sqrt(flies.length * 0.08 * sinceLastRepopulate))\n      const n = Math.min(options.population.max - filteredFlies.length, newFliesCount)\n      if(n > 0) {\n        setOptions({...options, population: {...options.population, last_repulate: now()}});\n        filteredFlies = mutateFlies(filteredFlies, n);\n      }\n    }\n\n    setFlies(filteredFlies);\n  };\n\n  console.log(flies.length);\n  return (\n    <Background image={options.background.image}>\n      {flies.map((fly) => (\n        <Butterfly\n          key={fly.id}\n          {...fly}\n          highContrast={options.highContrast}\n          onClick={() => removeFly(fly.id)}\n        />\n      ))}\n      {menuState &&\n        <Menu\n          menuState={menuState}\n          setMenuState={setMenuState}\n          options={options}\n          setOptions={setOptions}\n        />\n      }\n    </Background>\n  );\n}\n\nexport default App;\n","import { useState, useEffect } from 'react';\n\nexport default function useKeyPress(targetKey) {\n  // State for keeping track of whether key is pressed\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  // If pressed key is our target key then set to true\n  function downHandler({ key }) {\n    if (key === targetKey) {\n      setKeyPressed(true);\n    }\n  }\n\n  // If released key is our target key then set to false\n  const upHandler = ({ key }) => {\n    if (key === targetKey) {\n      setKeyPressed(false);\n    }\n  };\n\n  // Add event listeners\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler);\n    window.addEventListener('keyup', upHandler);\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener('keydown', downHandler);\n      window.removeEventListener('keyup', upHandler);\n    };\n  }, []); // Empty array ensures that effect is only run on mount and unmount\n\n  return keyPressed;\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}